"use strict";

(function () {
  var MAX_CHAR_HASHTAG_AMOUNT = 20;
  var MAX_HASHTAG_AMOUNT = 2;
  var HASHTAG_VALID_FERST_CHAR = /^#/;

  // поставить константу в нижнюю форму
  var HASHTAG_VALID_OTHER_CHAR = /^#[A-Za-zА-Яа-я0-9]{1,19}$/;
  var formUpload = document.querySelector('.img-upload__form');
  var hashtagsInput = formUpload.querySelector('.text__hashtags');
  var onHashtagInputValid = function onHashtagInputValid(evt) {
    evt.stopPropagation();
    var arrHastags = hashtagsInput.value.toLowerCase().split(' ').filter(function (tag) {
      return tag !== '';
    });
    var uniqueHashTagArray = new Set(arrHastags);
    if (arrHastags.length > MAX_HASHTAG_AMOUNT) {
      hashtagsInput.setCustomValidity("\u0425\u044D\u0448-\u0442\u0435\u0433\u043E\u0432 \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u0431\u043E\u043B\u044C\u0448\u0435 \u0447\u0435\u043C ".concat(MAX_HASHTAG_AMOUNT));
    }
    arrHastags.forEach(function (hashtag) {
      if (!HASHTAG_VALID_FERST_CHAR.test(hashtag)) {
        hashtagsInput.setCustomValidity('Хэш-тег должен начинается с символа # (решётка)');
      } else if (hashtag.length > 19) {
        hashtagsInput.setCustomValidity("\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u043E\u0435 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432 ".concat(MAX_CHAR_HASHTAG_AMOUNT));
      } else if (!HASHTAG_VALID_OTHER_CHAR.test(hashtag)) {
        hashtagsInput.setCustomValidity("\u0425\u044D\u0448-\u0442\u0435\u0433 \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0441\u0442\u043E\u044F\u0442\u044C \u0438\u0437 \u0431\u0443\u043A\u0432 \u0438 \u0447\u0438\u0441\u0435\u043B \u0438 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043F\u0440\u043E\u0431\u0435\u043B\u044B,\n        \u0441\u043F\u0435\u0446\u0441\u0438\u043C\u0432\u043E\u043B\u044B (#, @, $ \u0438 \u0442. \u043F.), \u0441\u0438\u043C\u0432\u043E\u043B\u044B \u043F\u0443\u043D\u043A\u0442\u0443\u0430\u0446\u0438\u0438 (\u0442\u0438\u0440\u0435, \u0434\u0435\u0444\u0438\u0441, \u0437\u0430\u043F\u044F\u0442\u0430\u044F \u0438 \u0442. \u043F.), \u044D\u043C\u043E\u0434\u0437\u0438 \u0438 \u0442. \u0434.");
      } else if (arrHastags.length !== uniqueHashTagArray.size) {
        hashtagsInput.setCustomValidity('Хэш-теги не должны повторяться');
      }
    });
    if (hashtagsInput.validity.customError) {
      hashtagsInput.style.outlineColor = 'red';
    } else {
      hashtagsInput.style.outlineColor = '';
    }
    hashtagsInput.reportValidity();
  };

  // test close

  formUpload.onsubmit = function () {
    return false;
  };
  hashtagsInput.addEventListener('input', onHashtagInputValid);
  hashtagsInput.addEventListener('keydown', function (evt) {
    return evt.stopPropagation();
  });
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS5qcyIsIm5hbWVzIjpbIk1BWF9DSEFSX0hBU0hUQUdfQU1PVU5UIiwiTUFYX0hBU0hUQUdfQU1PVU5UIiwiSEFTSFRBR19WQUxJRF9GRVJTVF9DSEFSIiwiSEFTSFRBR19WQUxJRF9PVEhFUl9DSEFSIiwiZm9ybVVwbG9hZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImhhc2h0YWdzSW5wdXQiLCJvbkhhc2h0YWdJbnB1dFZhbGlkIiwiZXZ0Iiwic3RvcFByb3BhZ2F0aW9uIiwiYXJySGFzdGFncyIsInZhbHVlIiwidG9Mb3dlckNhc2UiLCJzcGxpdCIsImZpbHRlciIsInRhZyIsInVuaXF1ZUhhc2hUYWdBcnJheSIsIlNldCIsImxlbmd0aCIsInNldEN1c3RvbVZhbGlkaXR5IiwiY29uY2F0IiwiZm9yRWFjaCIsImhhc2h0YWciLCJ0ZXN0Iiwic2l6ZSIsInZhbGlkaXR5IiwiY3VzdG9tRXJyb3IiLCJzdHlsZSIsIm91dGxpbmVDb2xvciIsInJlcG9ydFZhbGlkaXR5Iiwib25zdWJtaXQiLCJhZGRFdmVudExpc3RlbmVyIl0sInNvdXJjZXMiOlsiZm9ybS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICBjb25zdCBNQVhfQ0hBUl9IQVNIVEFHX0FNT1VOVCA9IDIwO1xuICBjb25zdCBNQVhfSEFTSFRBR19BTU9VTlQgPSAyO1xuXG4gIGNvbnN0IEhBU0hUQUdfVkFMSURfRkVSU1RfQ0hBUiA9IC9eIy87XG5cbiAgLy8g0L/QvtGB0YLQsNCy0LjRgtGMINC60L7QvdGB0YLQsNC90YLRgyDQsiDQvdC40LbQvdGO0Y4g0YTQvtGA0LzRg1xuICBjb25zdCBIQVNIVEFHX1ZBTElEX09USEVSX0NIQVIgPSAvXiNbQS1aYS160JAt0K/QsC3RjzAtOV17MSwxOX0kLztcblxuICB2YXIgZm9ybVVwbG9hZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbWctdXBsb2FkX19mb3JtJyk7XG4gIHZhciBoYXNodGFnc0lucHV0ID0gZm9ybVVwbG9hZC5xdWVyeVNlbGVjdG9yKCcudGV4dF9faGFzaHRhZ3MnKTtcblxuICB2YXIgb25IYXNodGFnSW5wdXRWYWxpZCA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICB2YXIgYXJySGFzdGFncyA9IGhhc2h0YWdzSW5wdXQudmFsdWUudG9Mb3dlckNhc2UoKS5zcGxpdCgnICcpLmZpbHRlcigodGFnKSA9PiB0YWcgIT09ICcnKTtcbiAgICB2YXIgdW5pcXVlSGFzaFRhZ0FycmF5ID0gbmV3IFNldChhcnJIYXN0YWdzKTtcblxuICAgIGlmIChhcnJIYXN0YWdzLmxlbmd0aCA+IE1BWF9IQVNIVEFHX0FNT1VOVCkge1xuICAgICAgaGFzaHRhZ3NJbnB1dC5zZXRDdXN0b21WYWxpZGl0eShg0KXRjdGILdGC0LXQs9C+0LIg0L3QtSDQtNC+0LvQttC90L4g0LHRi9GC0Ywg0LHQvtC70YzRiNC1INGH0LXQvCAke01BWF9IQVNIVEFHX0FNT1VOVH1gKTtcbiAgICB9XG5cbiAgICBhcnJIYXN0YWdzLmZvckVhY2goKGhhc2h0YWcpID0+IHtcbiAgICAgIGlmICghSEFTSFRBR19WQUxJRF9GRVJTVF9DSEFSLnRlc3QoaGFzaHRhZykpIHtcbiAgICAgICAgaGFzaHRhZ3NJbnB1dC5zZXRDdXN0b21WYWxpZGl0eShcbiAgICAgICAgICAn0KXRjdGILdGC0LXQsyDQtNC+0LvQttC10L0g0L3QsNGH0LjQvdCw0LXRgtGB0Y8g0YEg0YHQuNC80LLQvtC70LAgIyAo0YDQtdGI0ZHRgtC60LApJyxcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoaGFzaHRhZy5sZW5ndGggPiAxOSkge1xuICAgICAgICBoYXNodGFnc0lucHV0LnNldEN1c3RvbVZhbGlkaXR5KFxuICAgICAgICAgIGDQnNCw0LrRgdC40LzQsNC70YzQvdC+0LUg0LrQvtC70LjRh9C10YHRgtCy0L4g0YHQuNC80LLQvtC70L7QsiAke01BWF9DSEFSX0hBU0hUQUdfQU1PVU5UfWAsXG4gICAgICAgIClcbiAgICAgIH0gZWxzZSBpZiAoIUhBU0hUQUdfVkFMSURfT1RIRVJfQ0hBUi50ZXN0KGhhc2h0YWcpKSB7XG4gICAgICAgIGhhc2h0YWdzSW5wdXQuc2V0Q3VzdG9tVmFsaWRpdHkoXG4gICAgICAgICAgYNCl0Y3RiC3RgtC10LMg0LTQvtC70LbQtdC9INGB0L7RgdGC0L7Rj9GC0Ywg0LjQtyDQsdGD0LrQsiDQuCDRh9C40YHQtdC7INC4INC90LUg0LzQvtC20LXRgiDRgdC+0LTQtdGA0LbQsNGC0Ywg0L/RgNC+0LHQtdC70YssXG4gICAgICAgINGB0L/QtdGG0YHQuNC80LLQvtC70YsgKCMsIEAsICQg0Lgg0YIuINC/LiksINGB0LjQvNCy0L7Qu9GLINC/0YPQvdC60YLRg9Cw0YbQuNC4ICjRgtC40YDQtSwg0LTQtdGE0LjRgSwg0LfQsNC/0Y/RgtCw0Y8g0Lgg0YIuINC/LiksINGN0LzQvtC00LfQuCDQuCDRgi4g0LQuYCxcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIGlmIChhcnJIYXN0YWdzLmxlbmd0aCAhPT0gdW5pcXVlSGFzaFRhZ0FycmF5LnNpemUpIHtcbiAgICAgICAgaGFzaHRhZ3NJbnB1dC5zZXRDdXN0b21WYWxpZGl0eSgn0KXRjdGILdGC0LXQs9C4INC90LUg0LTQvtC70LbQvdGLINC/0L7QstGC0L7RgNGP0YLRjNGB0Y8nKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChoYXNodGFnc0lucHV0LnZhbGlkaXR5LmN1c3RvbUVycm9yKSB7XG4gICAgICBoYXNodGFnc0lucHV0LnN0eWxlLm91dGxpbmVDb2xvciA9ICdyZWQnO1xuICAgIH0gZWxzZSB7XG4gICAgICBoYXNodGFnc0lucHV0LnN0eWxlLm91dGxpbmVDb2xvciA9ICcnO1xuICAgIH1cblxuICAgIGhhc2h0YWdzSW5wdXQucmVwb3J0VmFsaWRpdHkoKTtcbiAgfVxuXG4gIC8vIHRlc3QgY2xvc2VcblxuICBmb3JtVXBsb2FkLm9uc3VibWl0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIGhhc2h0YWdzSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBvbkhhc2h0YWdJbnB1dFZhbGlkKVxuICBoYXNodGFnc0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZ0KSA9PiBldnQuc3RvcFByb3BhZ2F0aW9uKCkpO1xufSgpKVxuIl0sIm1hcHBpbmdzIjoiOztBQUFDLGFBQVk7RUFDWCxJQUFNQSx1QkFBdUIsR0FBRyxFQUFFO0VBQ2xDLElBQU1DLGtCQUFrQixHQUFHLENBQUM7RUFFNUIsSUFBTUMsd0JBQXdCLEdBQUcsSUFBSTs7RUFFckM7RUFDQSxJQUFNQyx3QkFBd0IsR0FBRyw0QkFBNEI7RUFFN0QsSUFBSUMsVUFBVSxHQUFHQyxRQUFRLENBQUNDLGFBQWEsQ0FBQyxtQkFBbUIsQ0FBQztFQUM1RCxJQUFJQyxhQUFhLEdBQUdILFVBQVUsQ0FBQ0UsYUFBYSxDQUFDLGlCQUFpQixDQUFDO0VBRS9ELElBQUlFLG1CQUFtQixHQUFHLFNBQXRCQSxtQkFBbUJBLENBQWFDLEdBQUcsRUFBRTtJQUN2Q0EsR0FBRyxDQUFDQyxlQUFlLEVBQUU7SUFFckIsSUFBSUMsVUFBVSxHQUFHSixhQUFhLENBQUNLLEtBQUssQ0FBQ0MsV0FBVyxFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsTUFBTSxDQUFDLFVBQUNDLEdBQUc7TUFBQSxPQUFLQSxHQUFHLEtBQUssRUFBRTtJQUFBLEVBQUM7SUFDekYsSUFBSUMsa0JBQWtCLEdBQUcsSUFBSUMsR0FBRyxDQUFDUCxVQUFVLENBQUM7SUFFNUMsSUFBSUEsVUFBVSxDQUFDUSxNQUFNLEdBQUdsQixrQkFBa0IsRUFBRTtNQUMxQ00sYUFBYSxDQUFDYSxpQkFBaUIseUxBQUFDLE1BQUEsQ0FBd0NwQixrQkFBa0IsRUFBRztJQUM5RjtJQUVBVSxVQUFVLENBQUNXLE9BQU8sQ0FBQyxVQUFDQyxPQUFPLEVBQUs7TUFDOUIsSUFBSSxDQUFDckIsd0JBQXdCLENBQUNzQixJQUFJLENBQUNELE9BQU8sQ0FBQyxFQUFFO1FBQzNDaEIsYUFBYSxDQUFDYSxpQkFBaUIsQ0FDN0IsaURBQWlELENBQ2xEO01BQ0gsQ0FBQyxNQUFNLElBQUlHLE9BQU8sQ0FBQ0osTUFBTSxHQUFHLEVBQUUsRUFBRTtRQUM5QlosYUFBYSxDQUFDYSxpQkFBaUIsMkxBQUFDLE1BQUEsQ0FDT3JCLHVCQUF1QixFQUM1RDtNQUNILENBQUMsTUFBTSxJQUFJLENBQUNHLHdCQUF3QixDQUFDcUIsSUFBSSxDQUFDRCxPQUFPLENBQUMsRUFBRTtRQUNsRGhCLGFBQWEsQ0FBQ2EsaUJBQWlCLGt2QkFHOUI7TUFDSCxDQUFDLE1BQU0sSUFBSVQsVUFBVSxDQUFDUSxNQUFNLEtBQUtGLGtCQUFrQixDQUFDUSxJQUFJLEVBQUU7UUFDeERsQixhQUFhLENBQUNhLGlCQUFpQixDQUFDLGdDQUFnQyxDQUFDO01BQ25FO0lBQ0YsQ0FBQyxDQUFDO0lBRUYsSUFBSWIsYUFBYSxDQUFDbUIsUUFBUSxDQUFDQyxXQUFXLEVBQUU7TUFDdENwQixhQUFhLENBQUNxQixLQUFLLENBQUNDLFlBQVksR0FBRyxLQUFLO0lBQzFDLENBQUMsTUFBTTtNQUNMdEIsYUFBYSxDQUFDcUIsS0FBSyxDQUFDQyxZQUFZLEdBQUcsRUFBRTtJQUN2QztJQUVBdEIsYUFBYSxDQUFDdUIsY0FBYyxFQUFFO0VBQ2hDLENBQUM7O0VBRUQ7O0VBRUExQixVQUFVLENBQUMyQixRQUFRLEdBQUcsWUFBWTtJQUNoQyxPQUFPLEtBQUs7RUFDZCxDQUFDO0VBQ0R4QixhQUFhLENBQUN5QixnQkFBZ0IsQ0FBQyxPQUFPLEVBQUV4QixtQkFBbUIsQ0FBQztFQUM1REQsYUFBYSxDQUFDeUIsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLFVBQUN2QixHQUFHO0lBQUEsT0FBS0EsR0FBRyxDQUFDQyxlQUFlLEVBQUU7RUFBQSxFQUFDO0FBQzNFLENBQUMsR0FBRSJ9