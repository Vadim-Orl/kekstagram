"use strict";

(function () {
  var bigPictures = document.querySelector('.big-picture');
  var picturesTable = document.querySelector('.pictures');
  var pictureClose = document.querySelector('.big-picture__cancel');
  var clickOutsideChecker;
  var openBigPicture = function openBigPicture(evt) {
    clickOutsideChecker = false;
    evt.stopPropagation();
    var target = evt.target;
    if (target.closest('.picture')) {
      window.newBigPicture(window.renderListPicturesBlock[target.closest('.picture').name]);
      bigPictures.classList.remove('hidden');
      document.addEventListener('mousedown', onOutsideOnLoadDown);
      document.addEventListener('mouseup', onOutsideOnLoadUp);
      document.addEventListener('keydown', onPictureEscPress);
    }
  };
  var closeBigPicture = function closeBigPicture() {
    bigPictures.classList.add('hidden');
    document.removeEventListener('keydown', onPictureEscPress);
    document.removeEventListener('mousedown', onOutsideOnLoadDown);
    document.removeEventListener('mouseup', onOutsideOnLoadUp);
  };
  var onPictureEscPress = function onPictureEscPress(evt) {
    if (window.utils.isEscKeycode(evt)) {
      closeBigPicture();
    }
  };
  var onOutsideOnLoadDown = function onOutsideOnLoadDown(evt) {
    if (!evt.target.classList.contains('big-picture')) return;
    clickOutsideChecker = true;
  };
  var onOutsideOnLoadUp = function onOutsideOnLoadUp(evt) {
    if (clickOutsideChecker && evt.target.classList.contains('big-picture')) {
      closeBigPicture();
    }
  };
  picturesTable.addEventListener('click', openBigPicture);
  pictureClose.addEventListener('click', closeBigPicture);
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW92ZS1iaWctcGhvdG8uanMiLCJuYW1lcyI6WyJiaWdQaWN0dXJlcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInBpY3R1cmVzVGFibGUiLCJwaWN0dXJlQ2xvc2UiLCJjbGlja091dHNpZGVDaGVja2VyIiwib3BlbkJpZ1BpY3R1cmUiLCJldnQiLCJzdG9wUHJvcGFnYXRpb24iLCJ0YXJnZXQiLCJjbG9zZXN0Iiwid2luZG93IiwibmV3QmlnUGljdHVyZSIsInJlbmRlckxpc3RQaWN0dXJlc0Jsb2NrIiwibmFtZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbk91dHNpZGVPbkxvYWREb3duIiwib25PdXRzaWRlT25Mb2FkVXAiLCJvblBpY3R1cmVFc2NQcmVzcyIsImNsb3NlQmlnUGljdHVyZSIsImFkZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ1dGlscyIsImlzRXNjS2V5Y29kZSIsImNvbnRhaW5zIl0sInNvdXJjZXMiOlsibW92ZS1iaWctcGhvdG8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGJpZ1BpY3R1cmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJpZy1waWN0dXJlJyk7XG4gIHZhciBwaWN0dXJlc1RhYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBpY3R1cmVzJyk7XG4gIHZhciBwaWN0dXJlQ2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmlnLXBpY3R1cmVfX2NhbmNlbCcpO1xuICB2YXIgY2xpY2tPdXRzaWRlQ2hlY2tlcjtcblxuICB2YXIgb3BlbkJpZ1BpY3R1cmUgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgY2xpY2tPdXRzaWRlQ2hlY2tlciA9IGZhbHNlO1xuICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB2YXIgeyB0YXJnZXQgfSA9IGV2dDtcblxuICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLnBpY3R1cmUnKSkge1xuICAgICAgd2luZG93Lm5ld0JpZ1BpY3R1cmUod2luZG93LnJlbmRlckxpc3RQaWN0dXJlc0Jsb2NrW3RhcmdldC5jbG9zZXN0KCcucGljdHVyZScpLm5hbWVdKTtcbiAgICAgIGJpZ1BpY3R1cmVzLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25PdXRzaWRlT25Mb2FkRG93bik7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25PdXRzaWRlT25Mb2FkVXApO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uUGljdHVyZUVzY1ByZXNzKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGNsb3NlQmlnUGljdHVyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBiaWdQaWN0dXJlcy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25QaWN0dXJlRXNjUHJlc3MpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uT3V0c2lkZU9uTG9hZERvd24pO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbk91dHNpZGVPbkxvYWRVcCk7XG4gIH07XG5cbiAgdmFyIG9uUGljdHVyZUVzY1ByZXNzID0gZnVuY3Rpb24gKGV2dCkge1xuICAgIGlmICh3aW5kb3cudXRpbHMuaXNFc2NLZXljb2RlKGV2dCkpIHtcbiAgICAgIGNsb3NlQmlnUGljdHVyZSgpXG4gICAgfVxuICB9XG5cbiAgdmFyIG9uT3V0c2lkZU9uTG9hZERvd24gPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgaWYgKCFldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYmlnLXBpY3R1cmUnKSkgcmV0dXJuO1xuICAgIGNsaWNrT3V0c2lkZUNoZWNrZXIgPSB0cnVlO1xuICB9XG5cbiAgdmFyIG9uT3V0c2lkZU9uTG9hZFVwID0gZnVuY3Rpb24gKGV2dCkge1xuICAgIGlmIChjbGlja091dHNpZGVDaGVja2VyICYmIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiaWctcGljdHVyZScpKSB7XG4gICAgICBjbG9zZUJpZ1BpY3R1cmUoKVxuICAgIH1cbiAgfVxuXG4gIHBpY3R1cmVzVGFibGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuQmlnUGljdHVyZSk7XG4gIHBpY3R1cmVDbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlQmlnUGljdHVyZSk7XG59KCkpO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFDLGFBQVk7RUFDWCxJQUFJQSxXQUFXLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLGNBQWMsQ0FBQztFQUN4RCxJQUFJQyxhQUFhLEdBQUdGLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLFdBQVcsQ0FBQztFQUN2RCxJQUFJRSxZQUFZLEdBQUdILFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLHNCQUFzQixDQUFDO0VBQ2pFLElBQUlHLG1CQUFtQjtFQUV2QixJQUFJQyxjQUFjLEdBQUcsU0FBakJBLGNBQWNBLENBQWFDLEdBQUcsRUFBRTtJQUNsQ0YsbUJBQW1CLEdBQUcsS0FBSztJQUMzQkUsR0FBRyxDQUFDQyxlQUFlLEVBQUU7SUFDckIsSUFBTUMsTUFBTSxHQUFLRixHQUFHLENBQWRFLE1BQU07SUFFWixJQUFJQSxNQUFNLENBQUNDLE9BQU8sQ0FBQyxVQUFVLENBQUMsRUFBRTtNQUM5QkMsTUFBTSxDQUFDQyxhQUFhLENBQUNELE1BQU0sQ0FBQ0UsdUJBQXVCLENBQUNKLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDSSxJQUFJLENBQUMsQ0FBQztNQUNyRmQsV0FBVyxDQUFDZSxTQUFTLENBQUNDLE1BQU0sQ0FBQyxRQUFRLENBQUM7TUFDdENmLFFBQVEsQ0FBQ2dCLGdCQUFnQixDQUFDLFdBQVcsRUFBRUMsbUJBQW1CLENBQUM7TUFDM0RqQixRQUFRLENBQUNnQixnQkFBZ0IsQ0FBQyxTQUFTLEVBQUVFLGlCQUFpQixDQUFDO01BQ3ZEbEIsUUFBUSxDQUFDZ0IsZ0JBQWdCLENBQUMsU0FBUyxFQUFFRyxpQkFBaUIsQ0FBQztJQUN6RDtFQUNGLENBQUM7RUFFRCxJQUFJQyxlQUFlLEdBQUcsU0FBbEJBLGVBQWVBLENBQUEsRUFBZTtJQUNoQ3JCLFdBQVcsQ0FBQ2UsU0FBUyxDQUFDTyxHQUFHLENBQUMsUUFBUSxDQUFDO0lBQ25DckIsUUFBUSxDQUFDc0IsbUJBQW1CLENBQUMsU0FBUyxFQUFFSCxpQkFBaUIsQ0FBQztJQUMxRG5CLFFBQVEsQ0FBQ3NCLG1CQUFtQixDQUFDLFdBQVcsRUFBRUwsbUJBQW1CLENBQUM7SUFDOURqQixRQUFRLENBQUNzQixtQkFBbUIsQ0FBQyxTQUFTLEVBQUVKLGlCQUFpQixDQUFDO0VBQzVELENBQUM7RUFFRCxJQUFJQyxpQkFBaUIsR0FBRyxTQUFwQkEsaUJBQWlCQSxDQUFhYixHQUFHLEVBQUU7SUFDckMsSUFBSUksTUFBTSxDQUFDYSxLQUFLLENBQUNDLFlBQVksQ0FBQ2xCLEdBQUcsQ0FBQyxFQUFFO01BQ2xDYyxlQUFlLEVBQUU7SUFDbkI7RUFDRixDQUFDO0VBRUQsSUFBSUgsbUJBQW1CLEdBQUcsU0FBdEJBLG1CQUFtQkEsQ0FBYVgsR0FBRyxFQUFFO0lBQ3ZDLElBQUksQ0FBQ0EsR0FBRyxDQUFDRSxNQUFNLENBQUNNLFNBQVMsQ0FBQ1csUUFBUSxDQUFDLGFBQWEsQ0FBQyxFQUFFO0lBQ25EckIsbUJBQW1CLEdBQUcsSUFBSTtFQUM1QixDQUFDO0VBRUQsSUFBSWMsaUJBQWlCLEdBQUcsU0FBcEJBLGlCQUFpQkEsQ0FBYVosR0FBRyxFQUFFO0lBQ3JDLElBQUlGLG1CQUFtQixJQUFJRSxHQUFHLENBQUNFLE1BQU0sQ0FBQ00sU0FBUyxDQUFDVyxRQUFRLENBQUMsYUFBYSxDQUFDLEVBQUU7TUFDdkVMLGVBQWUsRUFBRTtJQUNuQjtFQUNGLENBQUM7RUFFRGxCLGFBQWEsQ0FBQ2MsZ0JBQWdCLENBQUMsT0FBTyxFQUFFWCxjQUFjLENBQUM7RUFDdkRGLFlBQVksQ0FBQ2EsZ0JBQWdCLENBQUMsT0FBTyxFQUFFSSxlQUFlLENBQUM7QUFDekQsQ0FBQyxHQUFFIn0=